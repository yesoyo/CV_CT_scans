{% extends "base.html" %}

{% block content %}
<section class="upload-card">
  <form action="{{ url_for('analyze') }}" method="post" enctype="multipart/form-data">
    <label for="file" class="form-label">ZIP archive with DICOM slices</label>
    <input id="file" name="file" type="file" accept=".zip" required />
    <button type="submit">Analyze scans</button>
  </form>
  <p class="hint">The archive may contain multiple series. Each series is evaluated independently.</p>
</section>

{% if results %}
<section class="results">
  <h2>Predictions</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Series UID</th>
          <th>Slices</th>
          <th>Score</th>
          <th>Prediction</th>
        </tr>
      </thead>
      <tbody>
        {% for result in results %}
        <tr>
          <td class="mono">{{ result.series_uid }}</td>
          <td>{{ result.num_slices }}</td>
          <td>{{ '%.3f'|format(result.score) }}</td>
          <td class="{{ 'positive' if result.label == 'pathology' else 'negative' }}">{{ result.label }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endif %}

{% if warnings %}
<section class="warnings">
  <h2>Warnings</h2>
  <ul>
    {% for message in warnings %}
    <li>{{ message }}</li>
    {% endfor %}
  </ul>
</section>
{% endif %}
{% endblock %}

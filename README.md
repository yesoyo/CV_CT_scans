# Анализ КТ грудной клетки (норма / патология)

## Описание решения
Система предназначена для автоматизированного анализа компьютерных томографий (КТ) грудной клетки.  
Пользователь загружает архив с DICOM-файлами, сервис выполняет предобработку данных, прогон через обученную модель PyTorch и возвращает результат: **норма** или **патология**.  

## Основные возможности
- Загрузка КТ-исследования в формате `zip` (содержит DICOM-срезы).  
- Автоматический препроцессинг изображений (нормализация, ресайз).  
- Инференс через 2D / 2.5D модель.  
- Выдача результата в виде JSON-ответа (класс и вероятность).  
- Возможность интеграции фронтенда для отображения отчёта.  

### Ограничения
- Работает только с исследованиями формата DICOM, упакованными в zip-архив.  
- Требуется совместимость по размеру и количеству срезов (модель обучена на ограниченном датасете).  
- Модель классифицирует только по принципу «норма / патология», без детализации вида патологии.  

## Системные требования
- **ОС:** Linux / Windows / macOS  
- **Python:** 3.9+  
- **Библиотеки:**  
  - `torch`, `torchvision`  
  - `fastapi`, `uvicorn`  
  - `pydicom`, `numpy`, `pandas`  
  - `scikit-learn`  
- **GPU (опционально):** NVIDIA с поддержкой CUDA для ускорения инференса  

## Быстрый старт
1. Клонировать репозиторий. 

2. Установить зависимости:

   ```bash
   pip install -r requirements.txt
   ```

3. Запустить сервис:

   ```bash
   uvicorn main:app --reload
   ```

4. Отправить запрос на инференс:

   ```bash
   curl -X POST "http://127.0.0.1:8000/predict" \
        -F "file=@example_ct.zip"
   ```

   Пример ответа:

   ```json
   {
     "prediction": "патология",
     "probability": 0.87
   }
   ```

## Структура проекта

```
project/
│── main.py                # Точка входа, FastAPI приложение
│── model.py               # Код загрузки и инференса модели
│── preprocessing.py       # Функции предобработки DICOM-срезов
│── utils.py               # Вспомогательные функции
│── requirements.txt       # Список зависимостей
│── README.md              # Документация
│── data/                  # Пример данных (опционально)
│── models/                # Сохранённые веса модели
│── frontend/              # HTML/JS интерфейс (если используется)
```

## Пример использования

* Для интеграции в другой сервис можно использовать REST API.
* Для ручной проверки можно загружать исследования через форму фронтенда или командой `curl`.
